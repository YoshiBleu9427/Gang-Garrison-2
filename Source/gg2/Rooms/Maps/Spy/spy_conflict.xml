<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<room>
  <caption/>
  <size height="1614" width="4458"/>
  <grid>
    <isometric>false</isometric>
    <snap x="6" y="6"/>
  </grid>
  <speed>30</speed>
  <persistent>false</persistent>
  <creationCode>basicRoomSetup();
instance_create(0,0,ConflictO);

// Defending BLU engi
with(npcNext(2880, 684)) {
    createEnemyEngi();
    npcSetTask(NPC_TASK_SENTRY, noone);
    sentryDownTxt = "Autogun scrapped!";
    sentryDownTxt2 = "There's an infiltrator#'round here!";
    
    npcEventAdd(NPC_EVENT_SENTRY_DOWN, '
        addPriorDialog(sentryDownTxt, face, subFace);
        addDialog(sentryDownTxt2, face, subFace);
        if(NPC02.sentry == noone) {
            with(EventManager) event_user(15);
        }
    ');
}

// Defending BLU engi
with(npcNext(3702, 696)) {
    createEnemyEngi();
    npcSetTask(NPC_TASK_SENTRY, noone);
    sentryDownTxt = "Infiltrator stabbing my autogun!";
    sentryDownTxt2 = "There's an infiltrator#waltzin' 'round here!";
    
    npcEventAdd(NPC_EVENT_SENTRY_DOWN, '
        addPriorDialog(sentryDownTxt, face, subFace);
        addDialog(sentryDownTxt2, face, subFace);
        if(NPC01.sentry == noone) {
            with(EventManager) event_user(15);
        }
    ');
}

// Camping BLU Sniper
with(npcNext(3264, 510)) {
    createEnemySniper();
    npcSetTask(NPC_TASK_CAMP, noone);
    defaultDir = 210;
    deathTxt = "Bloody hell! I knew#I should have stayed#in bed today.";
    seeTxt = "'filtrator 'round here!";
    killTxt = "Sittin' around like#a bloody wanker!";
    
    npcEventAdd(NPC_EVENT_DEATH, '
        addPriorDialog(deathTxt, face, subFace);
    ');
    
    npcEventAdd(NPC_EVENT_PLAYER_SEEN, '
        if(not alreadySeen) {
            addDialog(seeTxt, face, subFace);
        }
    ');
    
    npcEventAdd(NPC_EVENT_KILL, '
        addPriorDialog(killTxt, face, subFace);
    ');
}

// Defending RED engi
with(npcNext(1716, 708)) {
    createAllyEngi();
    npcSetTask(NPC_TASK_SENTRY, noone);
    text = "Go stab them autoguns, son!#I'll defend our damn intel right here!";
    textIntel = "Job well done, son!";
    textWin = "Heck, that was easy.";
    npcEventAdd(NPC_EVENT_MEET, '
        if(global.winners == TEAM_RED) {
            addDialog(textWin, face, subFace);
        } else {
            if(global.myself.object.intel) {
                addDialog(textIntel, face, subFace);
            } else {
                addDialog(text, face, subFace);
            }
        }
    ');
}

// RED idling Heavy
// attacks when blu sentries are down
with(npcNext(1470, 666)) {
    createAllyHeavy();
    npcSetTask(NPC_TASK_IDLE, noone);
    text = "Entire enemy team is defend!#You must destroy autogun,#and then I go with you!";
    textIntel = "Many thanks!#You are credit to team.";
    textIntelGive = "You faster! Go!#Bring little case to base!";
    textWin = "We are king of team!";
    textDeath = "Daaaaaaah!";
    
    npcEventAdd(NPC_EVENT_MEET, '
        if(global.winners == TEAM_RED) {
            addDialog(textWin, face, subFace);
        } else if(global.myself.object.intel) {
            addDialog(textIntel, face, subFace);
        } else if(object.intel) {
            doEventDropIntel(id);
            addPriorDialog(textIntelGive, face, subFace);
        } else {
            addDialog(text, face, subFace);
        }
    ');
    npcEventAdd(NPC_EVENT_DEATH, '
        addDialog(textDeath, face, subFace);
    ');
    npcEventAdd(NPC_EVENT_INTEL_GRAB, '
        toggleActionMusic(true);
        with(NPC) {
            if(team != global.myself.team and class == CLASS_ENGINEER) {
                npcSetTask(NPC_TASK_CHASE);
            }
        }
    ');
}

// Quote
with(npcNext(2232, 570)) {
    createAllyQuote();
    text = "QQQQ-Hello. I'm a roQQQQQQQ-bot.#QQQQ-Don't press QQQQ-";
    textIntel = "You have the intel! QQQQ-#Bring it to your base QQQQ-and#place it on your team's QQQQ-";
    textDeath = "QQQQQQQQQQ-#QQ-#QQQQQ-#--";
    npcEventAdd(NPC_EVENT_MEET, '
        if(global.myself.object.intel) {
            addDialog(textIntel, face, subFace);
        } else {
            addDialog(text, face, subFace);
        }
    ');
    npcEventAdd(NPC_EVENT_DEATH, '
        addDialog(textDeath, face, subFace);
    ');
}

with(EventManager) {
    eventCustom1Fired = false;
    npcEventAdd(PLAYER_EVENT_DEATH, '
        gameOver();
    ');
    npcEventAdd(PLAYER_EVENT_INTEL_GRAB, '
        toggleActionMusic(true);
        with(NPC) {
            if(team != global.myself.team and class == CLASS_ENGINEER) {
                npcSetTask(NPC_TASK_CHASE);
            }
        }
    ');
    npcEventAdd(EVENT_CUSTOM_1, '
        if(not eventCustom1Fired) {
            eventCustom1Fired = true;
            with(NPC05) {
                npcSetTask(NPC_TASK_GOAL_OFFENSIVE);
                npcTeleport(id, 2646, 702);
                addDialog("Thank you!#Now take intel! I cover you!", face, subFace);
            }
        }
    ');
}
</creationCode>
  <backgroundColor>000000</backgroundColor>
  <drawBackgroundColor>true</drawBackgroundColor>
  <backgrounds>
    <backgroundDef>
      <visibleOnRoomStart>true</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage>ConflictB</backgroundImage>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>false</tileHorizontally>
      <tileVertically>false</tileVertically>
      <stretch>true</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
    <backgroundDef>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <isForeground>false</isForeground>
      <backgroundImage/>
      <offset x="0" y="0"/>
      <speed x="0" y="0"/>
      <tileHorizontally>true</tileHorizontally>
      <tileVertically>true</tileVertically>
      <stretch>false</stretch>
    </backgroundDef>
  </backgrounds>
  <enableViews>true</enableViews>
  <views>
    <view>
      <visibleOnRoomStart>true</visibleOnRoomStart>
      <viewInRoom height="600" width="800" x="0" y="0"/>
      <portOnScreen height="600" width="800" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
    <view>
      <visibleOnRoomStart>false</visibleOnRoomStart>
      <viewInRoom height="480" width="640" x="0" y="0"/>
      <portOnScreen height="480" width="640" x="0" y="0"/>
      <objectFollowing hBorder="32" hSpeed="-1" vBorder="32" vSpeed="-1"/>
    </view>
  </views>
  <instances>
    <instance>
      <object>IntelligenceBaseRed</object>
      <position x="840" y="702"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>IntelligenceBaseBlue</object>
      <position x="3654" y="702"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>HealingCabinet</object>
      <position x="1440" y="864"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1494" y="828"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1494" y="888"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1500" y="828"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1494" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1500" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1500" y="888"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1488" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>HealingCabinet</object>
      <position x="3168" y="864"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>HealingCabinet</object>
      <position x="3024" y="864"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1260" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1266" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1488" y="828"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1488" y="888"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3228" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3216" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3222" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>SpawnPointRed</object>
      <position x="1326" y="870"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1272" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1266" y="828"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1260" y="828"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1260" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1116" y="936"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1122" y="936"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1128" y="936"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>RedTeamGate</object>
      <position x="1266" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3354" y="924"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3342" y="924"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3348" y="924"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3216" y="816"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3222" y="816"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3228" y="816"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3216" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3222" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3228" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2994" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3000" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2988" y="792"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2994" y="792"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3000" y="792"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2988" y="852"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2988" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="2994" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>BlueTeamGate</object>
      <position x="3000" y="768"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>HealingCabinet</object>
      <position x="1296" y="864"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>NPCSentrySpot</object>
      <position x="912" y="708"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>NPCSentrySpot</object>
      <position x="3684" y="702"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>NPCSentrySpot</object>
      <position x="2898" y="696"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>NPCSniperSpot</object>
      <position x="3222" y="516"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
    <instance>
      <object>SpawnPointBlue</object>
      <position x="3072" y="870"/>
      <creationCode/>
      <locked>false</locked>
    </instance>
  </instances>
  <tiles/>
  <editorSettings remember="false"/>
</room>
