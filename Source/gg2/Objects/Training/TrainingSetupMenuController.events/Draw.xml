<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="DRAW" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">var i, nbDraw;
var slot, nbSlotR, nbSlotB, strSpec;
var slotColor, slotClass, slotName, slotSepIndex, slotPlayerName;
var chatLength;
chatLength = 15; // lets display 15 lines

draw_set_alpha(1);
draw_set_color(make_color_hsv((current_time / 1000 * 255) mod 255,255,255));
draw_set_halign(fa_left);

for(i = ds_list_size(chatLog) - chatOffset - 1; i &gt; max(0, ds_list_size(chatLog) - chatOffset - 1 - chatLength); i-=1) {
    draw_text(32, 300 - (nbDraw * 16), ds_list_find_value(chatLog, i));
}

strSpec = "";

for(i = 0; i &lt; ds_list_size(slots); i+=1) {
    slot = ds_list_find_value(slots, i);
    slotColor = string_char_at(slot, 1);
    slotClass = string_char_at(slot, 2);
    slotSepIndex = string_pos(slot, "#");
    slotName = string_delete(string_delete(slot, 1, 2), slotSepIndex, 255);
    slotPlayerName = string_copy(slot, slotSepIndex + 1, 255);
    if(slotColor == "B") {
        draw_set_halign(fa_right);
        draw_circle_color(464, 32 + 16 * nbSlotB, 9, c_white, c_white, true);
        if(string_length(slotPlayerName) &gt; 0) {
            draw_circle_color(464, 32 + 16 * nbSlotB, 9, c_blue, c_blue, false);
            draw_text(464, 32 + 16 * nbSlotB, slotName + " (" + slotPlayerName + ")");
        } else {
            draw_text(464, 32 + 16 * nbSlotB, slotName);
        }
        nbSlotB += 1;
    } else if(slotColor == "R") {
        draw_set_halign(fa_left);
        draw_circle_color(256, 32 + 16 * nbSlotR, 9, c_white, c_white, true);
        if(string_length(slotPlayerName) &gt; 0) {
            draw_circle_color(256, 32 + 16 * nbSlotR, 9, c_blue, c_blue, false);
            draw_text(256, 32 + 16 * nbSlotR, slotName + " (" + slotPlayerName + ")");
        } else {
            draw_text(256, 32 + 16 * nbSlotR, slotName);
        }
        nbSlotR += 1;
    }
}

with(SetupPlayer) {
    if(team == TEAM_SPECTATOR) {
        if(strSpec != "") {
            strSpec += ",";
        }
        strSpec += name;
    }
}

draw_set_halign(fa_left);
draw_text(128, 460, "Spectators: " + strSpec);

for(i = 0; i &lt; nbMenus; i+=1) {
    draw_text(menuX[i], menuY[i], menuText[i]);
}
</argument>
      </arguments>
    </action>
  </actions>
</event>
