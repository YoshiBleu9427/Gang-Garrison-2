<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="CREATE" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">//timeLimit=global.timeLimitMins*30*60
//timer=timeLimit
teamoffset=0
overtime=0
global.totalControlPoints=instance_number(ControlPoint)
global.rupTime=5*30/global.delta_factor

if instance_exists(ControlPointSetupGate){
    //ADCP
    mode=1
    if global.adcpStopwatch==1 and global.isHost and global.adcpRound1Score==-1 and global.currentStopwatchRound==0{
        ds_list_insert(global.map_rotation,ds_list_find_index(global.map_rotation,global.currentMap)+1,global.currentMap)
        global.currentStopwatchRound=1
        //reset vars
        global.adcpRound1Score=-1
        global.adcpRound2Score=-1
        global.adcpRound1Caps=-1
        global.adcpRound2Caps=-1
        //global.currentStopwatchRound=0
        global.adcpWinner=""
        global.adcpRound1CapTimestamp=-1
        global.adcpRound2CapTimestamp=-1
        global.myAdcpTeam=""
    }
    if global.adcpStopwatch==1 and global.isHost and global.adcpRound1Score!=-1{
        global.currentStopwatchRound=2
    }
    global.setupTimer=40*30
    timeLimit=min(2*30*60,global.timeLimitMins*30*60)
    timer=timeLimit
    basetime=10*30 //original was 6 seconds
    if global.totalControlPoints==5{
        ControlPoint5.capTime=basetime
        ControlPoint4.capTime=basetime*1.5
        ControlPoint3.capTime=basetime*2
        ControlPoint2.capTime=basetime*2.5
        ControlPoint1.capTime=basetime*3
    }else if global.totalControlPoints==4{
        ControlPoint4.capTime=basetime*2
        ControlPoint3.capTime=basetime*2.5
        ControlPoint2.capTime=basetime*3
        ControlPoint1.capTime=basetime*3.5
    }else if global.totalControlPoints==3{
        ControlPoint3.capTime=basetime*2.5
        ControlPoint2.capTime=basetime*3
        ControlPoint1.capTime=basetime*3.5
    }else if global.totalControlPoints==2{
        ControlPoint2.capTime=basetime*3.5
        ControlPoint1.capTime=basetime*4
    }else if global.totalControlPoints==1{
        ControlPoint1.capTime=basetime*4.5
    }
}else{
    //NOT ADCP
    timeLimit=global.timeLimitMins*30*60
    timer=timeLimit
    mode=0
    global.setupTimer=0
    basetime=7*30
    if global.totalControlPoints==5{
        ControlPoint5.capTime=basetime*1.5
        ControlPoint4.capTime=16*30//basetime*2
        ControlPoint3.capTime=20*30//basetime*3
        ControlPoint2.capTime=16*30//basetime*2
        ControlPoint1.capTime=basetime*1.5
    }else if global.totalControlPoints==4{
        ControlPoint4.capTime=basetime*1.5
        ControlPoint3.capTime=basetime*3
        ControlPoint2.capTime=basetime*3
        ControlPoint1.capTime=basetime*1.5
    }else if global.totalControlPoints==3{
        ControlPoint3.capTime=basetime*2.25
        ControlPoint2.capTime=basetime*4.5
        ControlPoint1.capTime=basetime*2.25
    }else if global.totalControlPoints==2{
        ControlPoint2.capTime=45*30 //basetime*4.5
        ControlPoint1.capTime=45*30 //basetime*4.5
    }else if global.totalControlPoints==1{
        ControlPoint1.capTime=basetime*9
    }
}

if (mode==0){
    var middlePoint;
    middlePoint=(global.totalControlPoints+1)/2
    
    for (i=1; i&lt;=global.totalControlPoints; i+=1){
        if (i &lt; middlePoint){
            global.cp[i].team=TEAM_RED;
        }else if (i &gt; middlePoint){
            global.cp[i].team=TEAM_BLUE;
        }else{
            // middle point, if exists
            global.cp[i].team=-1
        }
    }
}else if (mode==1){
    for (i=1; i &lt;=global.totalControlPoints; i+=1){
        global.cp[i].team=TEAM_BLUE
    }
}
</argument>
      </arguments>
    </action>
  </actions>
</event>
